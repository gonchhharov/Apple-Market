<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="bootstrap-5.3.6-dist/css/bootstrap.min.css">
        <title>Apple Market | Главная</title>
        <link rel="stylesheet" href="style.css">
    </head>
    
    <body>

        <header>
            <nav class="navbar">
                <div class="logo">Apple Market</div>
                <ul class="menu">
                    <li><a href="index.html">Главная</a></li>
                    <li><a href="pageIPHN.html">iPhone</a></li>
                    <li><a href="pageIPD.html">iPad</a></li>
                    <li><a href="pageMAC.html">Mac</a></li>
                    <li><a href="pagePods.html">AirPods</a></li>
                    <li><a href="pageAWTCH.html">Apple Watch</a></li>
                    <li><a href="pageACS.html">Аксессуары</a></li>
                </ul>
                <div class="cart">
                    <a href="#">Корзина</a>
                </div>
            </nav>
        </header>
        
            <section class="container my-5">
                <h2 class="mb-4">Форма обратной связи</h2>
                <form id="feedbackForm">
                    <div class="mb-3">
                        <label for="name" class="form-label">Имя</label>
                        <input type="text" class="form-control" id="name" name="name" placeholder="Ваше имя">
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email адрес</label>
                        <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com">
                    </div>
                    <div class="mb-3">
                        <label for="message" class="form-label">Сообщение</label>
                        <textarea class="form-control" id="message" name="message" rows="4" placeholder="Ваше сообщение"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Отправить</button>
                </form>
            </section>
        </section>
        <script src="bootstrap-5.3.6-dist/js/bootstrap.bundle.min.js"></script>
        <script>
  document.getElementById('feedbackForm').addEventListener('submit', async function (e) {
    e.preventDefault();

    const form = e.target;
    const data = {
      name: form.name.value,
      email: form.email.value,
      message: form.message.value
    };

    try {
      const res = await fetch('http://158.160.145.245:8065/api/feedback', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      if (res.ok) {
        alert('✅ Сообщение отправлено!');
        form.reset();
      } else {
        alert('❌ Ошибка при отправке.');
      }
    } catch (err) {
      alert('❌ Сервер недоступен.');
      console.error(err);
    }
  });
</script>
    </body>
</html>